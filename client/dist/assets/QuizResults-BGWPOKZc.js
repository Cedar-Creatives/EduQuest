import{c as P,t as D,b as U,r as u,u as _,j as e,B as d,C as l,d as i,e as c,f as w,o as C,g as o,i as H,n as m,H as W,m as K}from"./index-BW2eZKgk.js";import{P as X}from"./progress-Ctn_lGjD.js";import{T as J,a as V,b as L,c as M}from"./tabs-YH3I4y41.js";import{T as Y}from"./trophy-HxUj-h9W.js";import{T}from"./target-CHxuEaUw.js";import{C as I}from"./clock-DBQmfBqq.js";import{A as Z}from"./award-_LcCg0d4.js";import{T as ee}from"./trending-up-DOr2oNsh.js";import{S as se}from"./share-2-3v_V1CT-.js";import{M as re}from"./message-circle-wkXCHLTQ.js";import{L as te}from"./lightbulb-z8vLSr3e.js";import{S as ae}from"./star-pge6XBue.js";import"./index-Bhh2lgCI.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=P("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=P("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function we(){const R=D(),j=U(),[B,z]=u.useState(!1),[S,E]=u.useState([]),[le,ie]=u.useState(!1),[n,O]=u.useState(null),[b,q]=u.useState(!1),{user:y}=_(),{result:r,quiz:N,subject:p,difficulty:f}=R.state||{};if(u.useEffect(()=>{if(r&&r.score>=80&&(z(!0),setTimeout(()=>z(!1),3e3)),r&&r.answers){const s=r.answers.filter(t=>!t.isCorrect);E(s)}},[r]),!r||!N)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No quiz results found"}),e.jsx(d,{onClick:()=>j("/app/quiz"),className:"mt-4",children:"Take a Quiz"})]});const F=s=>s>=80?"from-green-500 to-green-600":s>=60?"from-yellow-500 to-orange-500":"from-red-500 to-red-600",G=s=>s>=90?"Outstanding! ðŸŽ‰":s>=80?"Excellent work! ðŸ‘":s>=70?"Good job! ðŸ‘":s>=60?"Not bad, keep practicing! ðŸ’ª":"Keep studying, you'll improve! ðŸ“š",Q=s=>{const t=Math.floor(s/60),a=s%60;return`${t}:${a.toString().padStart(2,"0")}`},$=async()=>{if(!(n||b)){q(!0);try{const s=await fetch("/api/quiz/ai-insights",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await(y==null?void 0:y.getIdToken())}`},body:JSON.stringify({quizId:r.id||"unknown",results:r,strugglingAreas:(r==null?void 0:r.strugglingAreas)||[],timeAnalysis:(r==null?void 0:r.timeAnalysis)||{}})});if(s.ok){const t=await s.json();O(t)}}catch{}finally{q(!1)}}};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[B&&e.jsx("div",{className:"fixed inset-0 pointer-events-none z-50",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-400/20 to-orange-500/20 animate-pulse"})}),e.jsx(l,{className:`bg-gradient-to-r ${F(r.score)} text-white border-0 shadow-xl`,children:e.jsxs(i,{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Y,{className:"w-10 h-10 text-white"})}),e.jsxs(c,{className:"text-4xl font-bold mb-2",children:[r.score,"%"]}),e.jsx(w,{className:"text-white/90 text-xl",children:G(r.score)}),e.jsxs("div",{className:"flex justify-center items-center space-x-6 mt-4 text-white/90",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(T,{className:"w-5 h-5 mr-2"}),r.correctAnswers,"/",r.totalQuestions," correct"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(I,{className:"w-5 h-5 mr-2"}),Q(r.timeTaken)]})]})]})}),e.jsxs(J,{defaultValue:"results",className:"w-full",children:[e.jsxs(V,{className:"grid w-full grid-cols-2",children:[e.jsx(L,{value:"results",children:"Results Overview"}),e.jsx(L,{value:"ai-insights",onClick:$,disabled:b||!!n,children:b?"Generating Insights...":"AI Insights"})]}),e.jsxs(M,{value:"results",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs(l,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-0 shadow-lg",children:[e.jsxs(i,{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mx-auto mb-2",children:e.jsx(C,{className:"w-6 h-6 text-white"})}),e.jsx(c,{children:"Subject"})]}),e.jsxs(o,{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold capitalize text-gray-900 dark:text-white",children:p}),e.jsx(H,{className:"mt-2 capitalize",children:f})]})]}),e.jsxs(l,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-0 shadow-lg",children:[e.jsxs(i,{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-green-600 rounded-lg flex items-center justify-center mx-auto mb-2",children:e.jsx(m,{className:"w-6 h-6 text-white"})}),e.jsx(c,{children:"Accuracy"})]}),e.jsxs(o,{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[Math.round(r.correctAnswers/r.totalQuestions*100),"%"]}),e.jsx(X,{value:r.correctAnswers/r.totalQuestions*100,className:"mt-2"})]})]}),e.jsxs(l,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-0 shadow-lg",children:[e.jsxs(i,{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg flex items-center justify-center mx-auto mb-2",children:e.jsx(I,{className:"w-6 h-6 text-white"})}),e.jsx(c,{children:"Time Taken"})]}),e.jsxs(o,{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Q(r.timeTaken)}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Avg: ",Math.round(r.timeTaken/r.totalQuestions),"s per question"]})]})]})]}),e.jsxs(l,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-0 shadow-lg mb-6",children:[e.jsxs(i,{children:[e.jsxs(c,{className:"flex items-center",children:[e.jsx(Z,{className:"w-5 h-5 mr-2 text-yellow-500"}),"Question Review"]}),e.jsx(w,{children:"Review your answers and see the correct solutions"})]}),e.jsx(o,{children:e.jsx("div",{className:"space-y-4",children:N.questions.map((s,t)=>{const a=r.results.find(x=>x.questionId===s._id),h=a==null?void 0:a.correct;return e.jsx("div",{className:`p-4 rounded-lg border-2 ${h?"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-900/20":"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-900/20"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${h?"bg-green-500":"bg-red-500"}`,children:h?e.jsx(m,{className:"w-5 h-5 text-white"}):e.jsx(k,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:["Question ",t+1,": ",s.question]}),e.jsx("div",{className:"space-y-2",children:s.options.map((x,v)=>{const A=(a==null?void 0:a.selectedAnswer)===v,g=s.correctAnswer===v;return e.jsx("div",{className:`p-2 rounded ${g?"bg-green-100 dark:bg-green-800/30 border border-green-300 dark:border-green-700":A&&!g?"bg-red-100 dark:bg-red-800/30 border border-red-300 dark:border-red-700":"bg-gray-50 dark:bg-gray-700"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[g&&e.jsx(m,{className:"w-4 h-4 text-green-600"}),A&&!g&&e.jsx(k,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:`${g?"font-medium text-green-800 dark:text-green-200":A&&!g?"font-medium text-red-800 dark:text-red-200":"text-gray-700 dark:text-gray-300"}`,children:x})]})},v)})}),s.explanation&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Explanation:"})," ",s.explanation]})})]})]})},s._id)})})})]}),S.length>0&&e.jsxs(l,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-0 shadow-lg mb-6",children:[e.jsxs(i,{children:[e.jsxs(c,{className:"flex items-center",children:[e.jsx(k,{className:"w-5 h-5 mr-2 text-red-500"}),"Questions to Review"]}),e.jsx(w,{children:"Focus on these questions that you answered incorrectly"})]}),e.jsx(o,{children:e.jsx("div",{className:"space-y-4",children:S.map((s,t)=>{var a,h;return e.jsxs("div",{className:"p-4 rounded-lg border-2 border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-900/20",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:s.question}),e.jsxs("div",{className:"flex items-center text-red-600 dark:text-red-400 mb-2",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Your answer: ",(a=N.questions.find(x=>x._id===s.questionId))==null?void 0:a.options[s.userAnswer]]}),e.jsxs("div",{className:"flex items-center text-green-600 dark:text-green-400 mb-2",children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"Correct answer: ",(h=N.questions.find(x=>x._id===s.questionId))==null?void 0:h.options[s.correctAnswer]]}),s.explanation&&e.jsx("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Explanation:"})," ",s.explanation]})})]},t)})})})]}),e.jsxs(l,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-0 shadow-lg mb-6",children:[e.jsx(i,{children:e.jsxs(c,{className:"flex items-center",children:[e.jsx(ee,{className:"w-5 h-5 mr-2 text-blue-500"}),"Performance Insights"]})}),e.jsx(o,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Strengths"}),e.jsxs("ul",{className:"space-y-2",children:[r.score>=80&&e.jsxs("li",{className:"flex items-center text-green-600 dark:text-green-400",children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"Excellent overall performance"]}),r.timeTaken<600&&e.jsxs("li",{className:"flex items-center text-green-600 dark:text-green-400",children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"Good time management"]}),r.correctAnswers>r.totalQuestions/2&&e.jsxs("li",{className:"flex items-center text-green-600 dark:text-green-400",children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"Strong subject knowledge"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Areas for Improvement"}),e.jsxs("ul",{className:"space-y-2",children:[r.score<70&&e.jsxs("li",{className:"flex items-center text-orange-600 dark:text-orange-400",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Review fundamental concepts"]}),r.timeTaken>900&&e.jsxs("li",{className:"flex items-center text-orange-600 dark:text-orange-400",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Work on answering speed"]}),e.jsxs("li",{className:"flex items-center text-blue-600 dark:text-blue-400",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Practice more ",p.toLowerCase()," questions"]})]})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(d,{onClick:()=>j(`/app/quiz/${p==null?void 0:p.toLowerCase()}/${f==null?void 0:f.toLowerCase()}`),className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 flex items-center space-x-2",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:"Retake Quiz"})]}),e.jsxs(d,{onClick:()=>j("/app/quiz"),variant:"outline",className:"flex items-center space-x-2",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsx("span",{children:"Try Different Quiz"})]}),e.jsxs(d,{onClick:()=>j("/app"),variant:"outline",className:"flex items-center space-x-2",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("span",{children:"Back to Dashboard"})]}),e.jsxs(d,{variant:"outline",className:"flex items-center space-x-2",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:"Share Results"})]})]})]}),e.jsx(M,{value:"ai-insights",children:e.jsxs(l,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-0 shadow-lg",children:[e.jsx(i,{children:e.jsxs(c,{className:"flex items-center",children:[e.jsx(re,{className:"w-5 h-5 mr-2 text-blue-500"}),"AI-Powered Insights"]})}),e.jsx(o,{children:b?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Our AI is analyzing your performance to provide personalized feedback. This may take a moment..."}),e.jsx(d,{className:"animate-pulse",disabled:!0,children:"Analyzing..."})]}):n?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Key Strengths"}),e.jsx("ul",{className:"space-y-2",children:n.strengths.map((s,t)=>e.jsxs("li",{className:"flex items-center text-green-600 dark:text-green-400",children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),s]},t))}),e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Areas to Focus On"}),e.jsx("ul",{className:"space-y-2",children:n.areasForImprovement.map((s,t)=>e.jsxs("li",{className:"flex items-center text-orange-600 dark:text-orange-400",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),s]},t))}),n.personalizedTips&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Personalized Study Tips"}),e.jsx("ul",{className:"space-y-2",children:n.personalizedTips.map((s,t)=>e.jsxs("li",{className:"flex items-center text-blue-600 dark:text-blue-400",children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),s]},t))})]}),n.recommendations&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Next Steps"}),e.jsx("ul",{className:"space-y-2",children:n.recommendations.map((s,t)=>e.jsxs("li",{className:"flex items-center text-purple-600 dark:text-purple-400",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),s]},t))})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Click the button below to let our AI analyze your quiz performance and provide personalized insights."}),e.jsx(d,{onClick:$,disabled:b,children:"Generate AI Insights"})]})})]})})]}),e.jsxs(l,{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0",children:[e.jsxs(i,{children:[e.jsxs(c,{className:"flex items-center",children:[e.jsx(ae,{className:"w-5 h-5 mr-2"}),"Want More Detailed Analytics?"]}),e.jsx(w,{className:"text-purple-100",children:"Upgrade to Premium for advanced performance tracking and personalized study recommendations"})]}),e.jsx(o,{children:e.jsx(d,{onClick:()=>j("/app/upgrade"),className:"bg-white text-purple-600 hover:bg-gray-100",children:"Upgrade to Premium"})})]})]})}export{we as QuizResults};
