import{c as u,i as C,b as B,a as T,r as c,j as e,B as r,U as S,d as j}from"./index-BR-T537K.js";import{C as o,a as x,b as h,d}from"./card-C9tChmD6.js";import{a as z}from"./notes-DoYMKAm4.js";import{A as L}from"./arrow-left-DPagBF-_.js";import{S as E}from"./share-2-DWRHRuBv.js";import{D as P}from"./download-CTLuTYJK.js";import{C as p}from"./clock-BeGDGwDp.js";import{E as A}from"./eye-Cb3uYbAW.js";import{S as D}from"./star-DCCDTEu9.js";import"./api-BwjwlSn4.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=u("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=u("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);function Y(){const{noteId:m}=C(),i=B(),{toast:l}=T(),[a,b]=c.useState(null),[N,g]=c.useState(!0),[n,w]=c.useState(!1);c.useEffect(()=>{(async()=>{try{console.log(`Fetching note: ${m}`);const t=await z(m);b(t.note)}catch(t){console.error("Error fetching note:",t),l({title:"Error",description:t.message,variant:"destructive"}),i("/app/notes")}finally{g(!1)}})()},[m,i,l]);const k=()=>{w(!n),l({title:n?"Bookmark removed":"Bookmark added",description:n?"Note removed from bookmarks":"Note added to bookmarks"})},f=()=>{l({title:"Download started",description:"Note is being downloaded as PDF"})},y=()=>{navigator.clipboard.writeText(window.location.href),l({title:"Link copied",description:"Note link copied to clipboard"})},v=()=>{window.print()};return N?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading note..."})]})}):a?e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(r,{variant:"outline",onClick:()=>i("/app/notes"),className:"flex items-center space-x-2",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{children:"Back to Library"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:k,className:n?"bg-yellow-50 border-yellow-300 text-yellow-700":"",children:e.jsx(W,{className:`w-4 h-4 ${n?"fill-current":""}`})}),e.jsx(r,{variant:"outline",size:"sm",onClick:y,children:e.jsx(E,{className:"w-4 h-4"})}),e.jsx(r,{variant:"outline",size:"sm",onClick:f,children:e.jsx(P,{className:"w-4 h-4"})}),e.jsx(r,{variant:"outline",size:"sm",onClick:v,children:e.jsx(q,{className:"w-4 h-4"})})]})]}),e.jsx(o,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-0 shadow-lg",children:e.jsx(x,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(h,{className:"text-3xl mb-4",children:a.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),a.authorName||"Unknown Author"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(p,{className:"w-4 h-4 mr-1"}),a.readTime," min read"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(A,{className:"w-4 h-4 mr-1"}),a.views||0," views"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(D,{className:"w-4 h-4 mr-1 text-yellow-500"}),a.rating||0," (",a.reviews||0," reviews)"]})]})]}),e.jsx(j,{variant:"outline",className:"ml-4",children:a.subject})]})})}),e.jsx(o,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-0 shadow-lg",children:e.jsx(d,{className:"p-8",children:e.jsx("div",{className:"prose prose-lg max-w-none dark:prose-invert",children:a.content.split(`
`).map((s,t)=>s.startsWith("# ")?e.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-900 dark:text-white",children:s.substring(2)},t):s.startsWith("## ")?e.jsx("h2",{className:"text-2xl font-semibold mb-4 mt-8 text-gray-900 dark:text-white",children:s.substring(3)},t):s.startsWith("### ")?e.jsx("h3",{className:"text-xl font-semibold mb-3 mt-6 text-gray-900 dark:text-white",children:s.substring(4)},t):s.startsWith("- ")?e.jsx("li",{className:"mb-2 text-gray-700 dark:text-gray-300",children:s.substring(2)},t):s.trim()===""?e.jsx("br",{},t):e.jsx("p",{className:"mb-4 text-gray-700 dark:text-gray-300 leading-relaxed",children:s},t))})})}),e.jsxs(o,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-0 shadow-lg",children:[e.jsx(x,{children:e.jsx(h,{children:"Related Notes"})}),e.jsx(d,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{title:"Advanced Calculus Concepts",subject:"Mathematics",readTime:30},{title:"Calculus Applications in Physics",subject:"Science",readTime:25}].map((s,t)=>e.jsx(o,{className:"cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs(d,{className:"p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(j,{variant:"outline",children:s.subject}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(p,{className:"w-3 h-3 mr-1"}),s.readTime," min"]})]})]})},t))})})]}),e.jsxs(o,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white border-0",children:[e.jsx(x,{children:e.jsx(h,{children:"Test Your Knowledge"})}),e.jsxs(d,{children:[e.jsxs("p",{className:"text-blue-100 mb-4",children:["Ready to test what you've learned? Take a quiz on ",a.subject.toLowerCase(),"."]}),e.jsx(r,{onClick:()=>i("/app/quiz"),className:"bg-white text-blue-600 hover:bg-gray-100",children:"Take a Quiz"})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Note not found"}),e.jsx(r,{onClick:()=>i("/app/notes"),className:"mt-4",children:"Back to Notes Library"})]})}export{Y as NoteViewer};
