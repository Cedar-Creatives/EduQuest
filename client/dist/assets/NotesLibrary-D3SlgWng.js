import{c as R,r as l,j as e,l as J,m as ve,n as be,o as we,e as x,p as K,b as Ae,a as De,u as Ce,B as c,S as ke,I as _e,q as Se,d as z,U}from"./index-BR-T537K.js";import{C as w,d as N,a as F,b as V,c as I}from"./card-C9tChmD6.js";import{g as Te,d as Ee}from"./notes-DoYMKAm4.js";import{c as Q,R as Re,T as Pe,P as Me,W as Oe,C as $e,a as Le,D as ze,b as X,O as Ue}from"./index-BczKN3eL.js";import{U as Fe}from"./upload-CZ5pPDvi.js";import{C as H}from"./clock-BeGDGwDp.js";import{S as A}from"./star-DCCDTEu9.js";import{E as B}from"./eye-Cb3uYbAW.js";import{D as G}from"./download-CTLuTYJK.js";import"./api-BwjwlSn4.js";import"./index-t_87lzsY.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=R("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=R("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=R("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var Z="AlertDialog",[He,ps]=ve(Z,[Q]),m=Q(),ee=r=>{const{__scopeAlertDialog:t,...a}=r,i=m(t);return e.jsx(Re,{...i,...a,modal:!0})};ee.displayName=Z;var Be="AlertDialogTrigger",se=l.forwardRef((r,t)=>{const{__scopeAlertDialog:a,...i}=r,o=m(a);return e.jsx(Pe,{...o,...i,ref:t})});se.displayName=Be;var Ge="AlertDialogPortal",ae=r=>{const{__scopeAlertDialog:t,...a}=r,i=m(t);return e.jsx(Me,{...i,...a})};ae.displayName=Ge;var qe="AlertDialogOverlay",te=l.forwardRef((r,t)=>{const{__scopeAlertDialog:a,...i}=r,o=m(a);return e.jsx(Ue,{...o,...i,ref:t})});te.displayName=qe;var u="AlertDialogContent",[We,Ye]=He(u),Je=we("AlertDialogContent"),re=l.forwardRef((r,t)=>{const{__scopeAlertDialog:a,children:i,...o}=r,f=m(a),p=l.useRef(null),h=J(t,p),y=l.useRef(null);return e.jsx(Oe,{contentName:u,titleName:le,docsSlug:"alert-dialog",children:e.jsx(We,{scope:a,cancelRef:y,children:e.jsxs($e,{role:"alertdialog",...f,...o,ref:h,onOpenAutoFocus:be(o.onOpenAutoFocus,n=>{var v;n.preventDefault(),(v=y.current)==null||v.focus({preventScroll:!0})}),onPointerDownOutside:n=>n.preventDefault(),onInteractOutside:n=>n.preventDefault(),children:[e.jsx(Je,{children:i}),e.jsx(Qe,{contentRef:p})]})})})});re.displayName=u;var le="AlertDialogTitle",ie=l.forwardRef((r,t)=>{const{__scopeAlertDialog:a,...i}=r,o=m(a);return e.jsx(Le,{...o,...i,ref:t})});ie.displayName=le;var oe="AlertDialogDescription",ce=l.forwardRef((r,t)=>{const{__scopeAlertDialog:a,...i}=r,o=m(a);return e.jsx(ze,{...o,...i,ref:t})});ce.displayName=oe;var Ke="AlertDialogAction",ne=l.forwardRef((r,t)=>{const{__scopeAlertDialog:a,...i}=r,o=m(a);return e.jsx(X,{...o,...i,ref:t})});ne.displayName=Ke;var de="AlertDialogCancel",me=l.forwardRef((r,t)=>{const{__scopeAlertDialog:a,...i}=r,{cancelRef:o}=Ye(de,a),f=m(a),p=J(t,o);return e.jsx(X,{...f,...i,ref:p})});me.displayName=de;var Qe=({contentRef:r})=>{const t=`\`${u}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${u}\` by passing a \`${oe}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${u}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return l.useEffect(()=>{var i;document.getElementById((i=r.current)==null?void 0:i.getAttribute("aria-describedby"))||console.warn(t)},[t,r]),null},Xe=ee,Ze=se,es=ae,xe=te,pe=re,he=ne,ge=me,ue=ie,fe=ce;const W=Xe,Y=Ze,ss=es,je=l.forwardRef(({className:r,...t},a)=>e.jsx(xe,{className:x("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...t,ref:a}));je.displayName=xe.displayName;const D=l.forwardRef(({className:r,...t},a)=>e.jsxs(ss,{children:[e.jsx(je,{}),e.jsx(pe,{ref:a,className:x("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...t})]}));D.displayName=pe.displayName;const C=({className:r,...t})=>e.jsx("div",{className:x("flex flex-col space-y-2 text-center sm:text-left",r),...t});C.displayName="AlertDialogHeader";const k=({className:r,...t})=>e.jsx("div",{className:x("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...t});k.displayName="AlertDialogFooter";const _=l.forwardRef(({className:r,...t},a)=>e.jsx(ue,{ref:a,className:x("text-lg font-semibold",r),...t}));_.displayName=ue.displayName;const S=l.forwardRef(({className:r,...t},a)=>e.jsx(fe,{ref:a,className:x("text-sm text-muted-foreground",r),...t}));S.displayName=fe.displayName;const T=l.forwardRef(({className:r,...t},a)=>e.jsx(he,{ref:a,className:x(K(),r),...t}));T.displayName=he.displayName;const E=l.forwardRef(({className:r,...t},a)=>e.jsx(ge,{ref:a,className:x(K({variant:"outline"}),"mt-2 sm:mt-0",r),...t}));E.displayName=ge.displayName;function hs(){const r=Ae(),{toast:t}=De(),{user:a}=Ce(),[i,o]=l.useState([]),[f,p]=l.useState(!0),[h,y]=l.useState(""),[n,v]=l.useState("all"),[j,P]=l.useState("grid"),[M,O]=l.useState(null),Ne=["all","Mathematics","Science","History","Literature","Biology","Programming"];l.useEffect(()=>{(async()=>{try{console.log("Fetching notes library...");const d=await Te();o(d.notes||[])}catch(d){console.error("Error fetching notes:",d),t({title:"Error",description:d.message,variant:"destructive"})}finally{p(!1)}})()},[t]);const $=i.filter(s=>{const d=s.title.toLowerCase().includes(h.toLowerCase())||s.description.toLowerCase().includes(h.toLowerCase()),g=n==="all"||s.subject===n;return d&&g}),b=s=>{console.log(`Opening note: ${s}`),r(`/app/notes/${s}`)},L=async(s,d)=>{try{O(s),console.log(`Deleting note: ${s}`),await Ee(s),o(g=>g.filter(ye=>ye._id!==s)),t({title:"Note deleted",description:`"${d}" has been deleted successfully`})}catch(g){console.error("Error deleting note:",g),t({title:"Error",description:g.message,variant:"destructive"})}finally{O(null)}};return f?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((s,d)=>e.jsx("div",{className:"h-64 bg-gray-200 rounded-lg"},d))})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Notes Library"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300",children:"Access comprehensive study materials and notes"})]}),(a==null?void 0:a.plan)==="premium"&&e.jsxs(c,{className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),"Upload Note"]})]}),e.jsx(w,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-0 shadow-lg",children:e.jsx(N,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(_e,{placeholder:"Search notes...",value:h,onChange:s=>y(s.target.value),className:"pl-10"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Ne.map(s=>e.jsx(c,{variant:n===s?"default":"outline",size:"sm",onClick:()=>v(s),className:"capitalize",children:s},s))}),e.jsxs("div",{className:"flex border rounded-lg",children:[e.jsx(c,{variant:j==="grid"?"default":"ghost",size:"sm",onClick:()=>P("grid"),className:"rounded-r-none",children:e.jsx(Ve,{className:"w-4 h-4"})}),e.jsx(c,{variant:j==="list"?"default":"ghost",size:"sm",onClick:()=>P("list"),className:"rounded-l-none",children:e.jsx(Ie,{className:"w-4 h-4"})})]})]})})}),$.length===0?e.jsx(w,{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-0 shadow-lg",children:e.jsxs(N,{className:"text-center py-12",children:[e.jsx(Se,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No notes found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:h||n!=="all"?"Try adjusting your search or filters":"No notes available in the library yet"})]})}):e.jsx("div",{className:j==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:$.map(s=>e.jsx(w,{className:`bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 cursor-pointer ${j==="list"?"flex":""}`,children:j==="grid"?e.jsxs(e.Fragment,{children:[e.jsx(F,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",onClick:()=>b(s._id),children:[e.jsx(V,{className:"text-lg line-clamp-2",children:s.title}),e.jsx(I,{className:"mt-2 line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-2",children:[e.jsx(z,{variant:"outline",children:s.subject}),(a==null?void 0:a._id)===s.author&&e.jsxs(W,{children:[e.jsx(Y,{asChild:!0,children:e.jsx(c,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50",disabled:M===s._id,children:e.jsx(q,{className:"w-4 h-4"})})}),e.jsxs(D,{children:[e.jsxs(C,{children:[e.jsx(_,{children:"Delete Note"}),e.jsxs(S,{children:['Are you sure you want to delete "',s.title,'"? This action cannot be undone.']})]}),e.jsxs(k,{children:[e.jsx(E,{children:"Cancel"}),e.jsx(T,{onClick:()=>L(s._id,s.title),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})]})}),e.jsxs(N,{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400 mb-4",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(U,{className:"w-4 h-4 mr-1"}),s.authorName||"Unknown"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(H,{className:"w-4 h-4 mr-1"}),s.readTime," min read"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(A,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium",children:s.rating||0}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",s.reviews||0,")"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(c,{size:"sm",variant:"outline",onClick:()=>b(s._id),children:[e.jsx(B,{className:"w-4 h-4 mr-1"}),"View"]}),e.jsx(c,{size:"sm",variant:"outline",children:e.jsx(G,{className:"w-4 h-4"})})]})]})]})]}):e.jsx("div",{className:"flex w-full",children:e.jsx(N,{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",onClick:()=>b(s._id),children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s.title}),e.jsx(z,{variant:"outline",children:s.subject})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(U,{className:"w-4 h-4 mr-1"}),s.authorName||"Unknown"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(H,{className:"w-4 h-4 mr-1"}),s.readTime," min read"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(A,{className:"w-4 h-4 mr-1 text-yellow-500"}),s.rating||0," (",s.reviews||0,")"]})]})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsxs(c,{size:"sm",variant:"outline",onClick:()=>b(s._id),children:[e.jsx(B,{className:"w-4 h-4 mr-1"}),"View"]}),e.jsx(c,{size:"sm",variant:"outline",children:e.jsx(G,{className:"w-4 h-4"})}),(a==null?void 0:a._id)===s.author&&e.jsxs(W,{children:[e.jsx(Y,{asChild:!0,children:e.jsx(c,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50",disabled:M===s._id,children:e.jsx(q,{className:"w-4 h-4"})})}),e.jsxs(D,{children:[e.jsxs(C,{children:[e.jsx(_,{children:"Delete Note"}),e.jsxs(S,{children:['Are you sure you want to delete "',s.title,'"? This action cannot be undone.']})]}),e.jsxs(k,{children:[e.jsx(E,{children:"Cancel"}),e.jsx(T,{onClick:()=>L(s._id,s.title),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})]})})})},s._id))}),(a==null?void 0:a.plan)==="freemium"&&e.jsxs(w,{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0",children:[e.jsxs(F,{children:[e.jsxs(V,{className:"flex items-center",children:[e.jsx(A,{className:"w-5 h-5 mr-2"}),"Unlock Premium Notes"]}),e.jsx(I,{className:"text-purple-100",children:"Upgrade to Premium to upload your own notes and access exclusive content"})]}),e.jsx(N,{children:e.jsx(c,{onClick:()=>r("/upgrade"),className:"bg-white text-purple-600 hover:bg-gray-100",children:"Upgrade to Premium"})})]})]})}export{hs as NotesLibrary};
